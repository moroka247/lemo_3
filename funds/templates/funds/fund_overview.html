{% extends "base.html" %}

{% block title %}
{{ fund.name}}
{% endblock title %}

{% block content %}

<table class="table table-borderless table-hover" cellspacing="1px">
    <thead>
        <td align="right">
            <a href="{% url 'funds:fund_form' %}" class="btn btn-outline-success" style="height:30px;width:110px;padding:2px">
                <i class="fas fa-plus"> Add New</i>
            </a>
            <a href="{% url 'funds:funds' %}" class="btn btn-outline-success" style="height:30px;width:200px;padding:2px">
                <i class="fas fa-step-backward"> Back to funds</i>
            </a>
        </td>
    </thead>
</table>

<h5>{{fund}}</h5>
<hr>
<b>
<ul class="nav nav-tabs">
    <li class="nav-item"><a class="nav-link active" href="#overview" aria-current="page" data-bs-toggle="tab" role="tab">Overview</a></li>
    <li class="nav-item"><a class="nav-link" href="#salient_terms" data-bs-toggle="tab" role="tab">Salient Terms</a></li>
    <li class="nav-item"><a class="nav-link" href="#investors" data-bs-toggle="tab" role="tab">Investors</a></li>
    <li class="nav-item"><a class="nav-link" href="#capital_accounts" data-bs-toggle="tab" role="tab">Capital Accounts</a></li>
    <li class="nav-item"><a class="nav-link" href="#portfolio" data-bs-toggle="tab" role="tab">Portfolio</a></li>
    <li class="nav-item"><a class="nav-link" href="#performance" data-bs-toggle="tab" role="tab">Cash Flows</a></li>
    <li class="nav-item"><a class="nav-link" href="#operations" data-bs-toggle="tab" role="tab">Fund Operations</a></li>
</ul>
</b>

<div class="tab-content mt-3">

    <div role="tabpanel" class="tab-pane fade in show active" id="overview">

        <div class="row col-md-12">
            <div class="col-md-4">
                <div class="card card-body p-3 shadow">
                    <canvas id="Chart1" width="200" height="150"></canvas>
                    <script>
                    var ctx = document.getElementById('Chart1').getContext('2d');
                    var Chart1 = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['Committed Capital', 'Drawn / Undrawn'],
                            datasets: [{
                                label: 'Capital Contribution',
                                data: [80, 45],
                                backgroundColor: [
                                    'navy',
                                    'grey',
                                    'rgba(53, 135, 164, 0.7)',
                                    'rgba(121, 67, 117, 0.7)',
                                
                                ],
                                borderColor: [
                                    'navy',
                                    'grey',
                                    'rgba(54, 162, 235, 1)',
                                ],
                                borderWidth: 1
                            },{
                                label: 'Undrawn Capital',
                                data: [0, 35],
                                backgroundColor: [
                                    'rgba(53, 135, 164, 0.7)',
                                    'rgba(53, 135, 164, 0.7)',
                                    'rgba(121, 67, 117, 0.7)',
                                
                                ],
                                borderColor: [
                                    'navy',
                                    'grey',
                                    'rgba(54, 162, 235, 1)',
                                ],
                                borderWidth: 1
                            }],
                            
                        },
                        options: {
                            scales: {
                                x: {
                                    stacked: true,
                                },
                                y: {
                                    stacked: true,
                                }
                            }
                        }
                    });
                    </script>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-body p-3 shadow">
                    <canvas id="Chart2" width="200" height="150"></canvas>
                    <script>
                    var ctx = document.getElementById('Chart2').getContext('2d');
                    var Chart2 = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['Committed Capital', 'Drawn / Undrawn'],
                            datasets: [{
                                label: 'Capital Commitments',
                                data: [80, 45],
                                backgroundColor: [
                                    'navy',
                                    'grey',
                                    'rgba(53, 135, 164, 0.7)',
                                    'rgba(121, 67, 117, 0.7)',
                                
                                ],
                                borderColor: [
                                    'navy',
                                    'grey',
                                    'rgba(54, 162, 235, 1)',
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                x: {
                                    stacked: true,
                                },
                                y: {
                                    stacked: true,
                                }
                            }
                        }
                    });
                    </script>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-body p-3 shadow">
                    <canvas id="Chart3" width="200" height="150"></canvas>
                    <script>
                    var ctx = document.getElementById('Chart3').getContext('2d');
                    var Chart3 = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['Committed Capital', 'Drawn / Undrawn'],
                            datasets: [{
                                label: 'Capital Commitments',
                                data: [80, 45],
                                backgroundColor: [
                                    'navy',
                                    'grey',
                                    'rgba(53, 135, 164, 0.7)',
                                    'rgba(121, 67, 117, 0.7)',
                                
                                ],
                                borderColor: [
                                    'navy',
                                    'grey',
                                    'rgba(54, 162, 235, 1)',
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                x: {
                                    stacked: true,
                                },
                                y: {
                                    stacked: true,
                                }
                            }
                        }
                    });
                    </script>
                </div>
            </div>

        </div>
    </div>


    <div role="tabpanel" class="tab-pane fade" id="salient_terms">

        <div class="container shadow">

            <div class="col-md-4 my-3">

            </div>

            <table class="" style="width:100%">
                <colgroup>
                    <col span="1" style="width: 30%;">
                    <col span="1" style="width: 70%;">
                </colgroup>

                <thead class="table-header">
                    
                </thead>
                <tbody>
                    <tr class="border-bottom"><td>Fund Name</td><td>{{fund.name}}</td></tr>
                    <tr class="border-bottom"><td>Fund Short Name</td><td>{{fund.short_name}}</td></tr>
                    <tr class="border-bottom"><td>Fund Objective</td><td vertical-align: top>{{fund.objective}}</td></tr>
                    <tr class="border-bottom"><td>Fund Life</td><td>{{fund.life}}</td></tr>
                    <tr class="border-bottom"><td>Investment Period</td><td>{{fund.investment_period}}</td></tr>
                    <tr class="border-bottom"><td>Divestment Period</td><td>{{fund.divestment_period}}</td></tr>
                    <tr class="border-bottom"><td>Fund Currency</td><td>{{fund.f_currency}}</td></tr>
                    <tr class="border-bottom"><td>Target commitment</td><td>{{fund.target_commitment}}</td></tr>
                    <tr class="border-bottom"><td>Committed Capital</td><td><a href="#">{{fund.commitment}}</a></td></tr>
                    <tr class="border-bottom"><td>Drawn Capital</td><td><a href="#">{{fund.drawn_capital}}</a></td></tr>
                    <tr class="border-bottom"><td>Undrawn Commitment</td><td>{{fund.undrawn_capital}}</td></tr>
                    <tr class="border-bottom"><td>Distributions</td><td><a href="#">{{fund.distributions}}</a></td></tr>
                    <tr class="border-bottom"><td>Number of portfolio investments</td><td><a href="#">{{fund.portfolio_count}}</a></td></tr>
                    <tr class="border-bottom"><td>Management Fee % - <i>during Investment Period</i></td><td>{{fund.man_fee}}</td></tr>
                    <tr class="border-bottom"><td>Management Fee Basis - <i>during Investment Period</i></td><td>{{fund.man_fee}}</td></tr>
                    <tr class="border-bottom"><td>Management Fee % - <i>during Divestment Period</i></td><td>{{fund.man_fee}}</td></tr>
                    <tr class="border-bottom"><td>Management Fee Basis - <i>during Divestment Period</i></td><td>{{fund.man_fee}}</td></tr>      
                </tbody>
            </table>
        </div>

    </div>

    <div role="tabpanel" class="tab-pane fade" id="investors">

        <div class=" row p-3 shadow">
            <div class="col-md-7">
                <table class="table" style="width:100%">
                    <colgroup>
                        <col span="1" style="width: 60%;">
                        <col span="1" style="width: 20%;">
                        <col span="1" style="width: 20%;">
                    </colgroup>
                    <thead class="table-header">
                        <th style="text-align:left">Investor</th>
                        <th style="text-align:right">Committed Capital</th>
                        <th style="text-align:center">% Interest</th>
                    </thead>
                    {% for record in close_records %}
                    <tr>
                        <td align="left">{{record.c_investor}}</td>
                        <td align="right">{{record.c_amount}}</td>
                        <td align="center">{{record.c_percentage}}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td align="left">Total</td>
                        <td align="right">{{total_close_comm}}</td>
                        <td align="center">100%</td>
                    </tr>
                </table>
            </div>

        </div>

    </div>

    <div role="tabpanel" class="tab-pane fade" id="capital_accounts">

        <div class="row">
            <div class="col-md-12 mt-10">
                <table class="table">
                    <colgroup>
                        <col span="1" style="width: 20%;">
                        <col span="1" style="width: 5%;">
                        <col span="1" style="width: 9%;">
                        <col span="1" style="width: 9%;">
                        <col span="1" style="width: 8%;">
                        <col span="1" style="width: 8%;">
                        <col span="1" style="width: 8%;">
                        <col span="1" style="width: 8%;">
                        <col span="1" style="width: 8%;">
                        <col span="1" style="width: 8%;">
                    </colgroup>
                    <thead class="border-bottom">
                        <tr class="" style="font-weight:bold">
                            <td align="left">Investor</td>
                            <td align="center">% Interest</td>
                            <td align="right">Capital Contribution</td>
                            <td align="right">Investments</td>
                            <td align="right">Organisat. Expenses</td>
                            <td align="right">Operating Expenses</td>
                            <td align="right">Undrawn Capital</td>
                            <td align="right">Fair Value of Portfolio</td>
                            <td align="right">Net Other Assets/(Liab.)</td>
                            <td align="center">Net Asset Value</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td align="left">Investor name</td>
                            <td align="center">10%</td>
                            <td align="right">100,000,000</td>
                            <td align="right">23,500,000</td>
                            <td align="right">500,000</td>
                            <td align="right">1,000,000</td>
                            <td align="right">75,000,000</td>
                            <td align="right">80,000,000</td>
                            <td align="right">5,000,000</td>
                            <td align="center">85,000,000</td>
                        </tr>
                    </tbody>

                </table>
            </div>
        </div>

    </div>

    <div role="tabpanel" class="tab-pane fade" id="portfolio">

        <div class="row">
            <div class="col-md-12 mt-10">
                <table class="table">
                    <colgroup>
                        <col span="1" style="width: 20%;">
                        <col span="1" style="width: 6%;">
                        <col span="1" style="width: 5%;">
                        <col span="1" style="width: 5%;">
                        <col span="1" style="width: 6%;">
                        <col span="1" style="width: 9%;">
                        <col span="1" style="width: 9%;">
                        <col span="1" style="width: 9%;">
                        <col span="1" style="width: 9%;">
                        <col span="1" style="width: 9%;">
                        <col span="1" style="width: 5%;">
                        <col span="1" style="width: 5%;">
                    </colgroup>
                    <thead class="border-bottom">
                        <tr class="" style="font-weight:bold">
                            <td align="left">Company name</td>
                            <td align="center">Security Type</td>
                            <td align="center"># of Shares</td>
                            <td align="center">% Ownership</td>
                            <td align="center">Initial Investment Date</td>
                            <td align="right">Fund Commitment</td>
                            <td align="right">Total Invested</td>
                            <td align="right">Current Cost</td>
                            <td align="right">Reported Value</td>
                            <td align="center">Realised Proceeds</td>
                            <td align="center">IRR</td>
                            <td align="center">MOIC</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td align="left">Company name</td>
                            <td align="center">Equity</td>
                            <td align="center">100</td>
                            <td align="center">25%</td>
                            <td align="center">500,000</td>
                            <td align="right">10,000,000</td>
                            <td align="right">10,000,000</td>
                            <td align="right">8,000,000</td>
                            <td align="right">12,000,000</td>
                            <td align="center">4,000,000</td>
                            <td align="center">25%</td>
                            <td align="center">2.0x</td>
                        </tr>
                    </tbody>

                </table>
            </div>
        </div>
    </div>

    <div role="tabpanel" class="tab-pane fade" id="performance">
        <h5>Performance</h5>
    </div>
    
    <div role="tabpanel" class="tab-pane fade" id="operations">
        <h5>Operations</h5>
    </div>

</div>

{% endblock content %}